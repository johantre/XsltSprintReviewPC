<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=1024, user-scalable=no">
<title>Sprint review Pandora</title>
<link rel="stylesheet" href="../deck/core/deck.core.css">
<link rel="stylesheet" href="../deck/extensions/goto/deck.goto.css">
<link rel="stylesheet" href="../deck/extensions/menu/deck.menu.css">
<link rel="stylesheet" href="../deck/extensions/navigation/deck.navigation.css">
<link rel="stylesheet" href="../deck/extensions/status/deck.status.css">
<link rel="stylesheet" href="../deck/extensions/hash/deck.hash.css">
<link rel="stylesheet" href="../deck/extensions/scale/deck.scale.css">
<link rel="stylesheet" href="../deck/themes/style/tomtom.css">
<link rel="stylesheet" href="../deck/themes/transition/horizontal-slide.css">
<link href="http://fonts.googleapis.com/css?family=Finger+Paint" rel="stylesheet" type="text/css">
<script src="../deck/lib/modernizr.custom.js"></script><script src="http://openlayers.org/api/OpenLayers.js"></script><link rel="stylesheet" href="extra/mnr-demo.css">
</head>
<body class="deck-container">
<section class="slide" id="intro" style="background-image: url('../deck/slides/photo.jpg')"><h1 class="center">Sprint Review</h1></section><section class="slide" id="" style="background-image: url('./img/pandora.png')"><h1 class="center" style="important;color:black;">Pandora</h1></section><section class="slide" id="goal" style=""><header>
            <h3>Sprint goal</h3>
        </header><blockquote style="font-size:38px">
            <p>Deliver a second Multinet-R product sample with:</p>
            <p> </p>
            <ul>
                <li>fixes based on customer feedback from first sample</li>
                <li>additional content</li>
            </ul>
            <p><cite style="float: right">Our product owner</cite></p>
        </blockquote></section><section class="slide" id="stories" style=""><header>
            <h3>Sprint overview - User stories</h3>
        </header><p>The sprint started on the <strong>8th of January</strong> and ended on the <strong>4th of February 2013</strong>.</p>
<div class="stories">
            <table>
                <tr>
<th>Epic</th>
<th>Story</th>
<th>SP</th>
</tr>
                <tr class="epic">
<td rowspan="1">Daf punk</td>
                    <td class="done">Wrap up remaining work</td>
<td>1</td>
</tr>
                <tr class="epic">
<td rowspan="1">Machine readable specs</td>
                    <td class="done">Write physical model in DITA XML format</td>
<td>2</td>
</tr>
                <tr class="epic">
<td rowspan="2">MNR Content</td>
                    <td class="done">Add traffic flow to routing and restriction layers</td>
<td>1</td>
</tr>
                <tr>
<td class="done">Hierarchical index: add postal areas, admin places, census blocks</td>
<td>2</td>
</tr>
                <tr class="epic">
<td rowspan="4">MNR Infrastructure</td>
                    <td class="done">Add record normalization to ProductCreateJob</td>
<td>2</td>
</tr>
                <tr>
<td class="done">Adapt code generation to (de)serialize AVRO</td>
<td>2</td>
</tr>
                <tr>
<td class="done">Let MNR pilot converter write to AVRO sequence files (iso CSV)</td>
<td>1</td>
</tr>
                <tr>
<td class="not-done">Build converter from AVRO sequence files to CSV</td>
<td>2</td>
</tr>
                <tr class="epic">
<td rowspan="2">MNR Maintenance</td>
                    <td class="done">Fix remarks from customers on first MNR sample</td>
<td>2</td>
</tr>
                <tr>
<td class="done">Create second pilot release package</td>
<td>1</td>
</tr>
                <tr class="epic">
<td rowspan="2" class="uncommitted">MNR Content</td>
                    <td class="uncommitted">Water area layer</td>
<td>?</td>
</tr>
                <tr>
<td class="uncommitted">City centre layer</td>
<td>?</td>
</tr>
                <tr class="epic">
<td rowspan="1" class="uncommitted">MNR Infra</td>
                    <td class="uncommitted">Create nightly build process for D64/UC3</td>
<td>?</td>
</tr>
            </table>
        </div>
<div class="info">
            <p class="scrum-master"><span class="caption">Product owner: </span><span class="content">Timothy Grymonpon</span></p>
            <p class="scrum-master"><span class="caption">Scrum master: </span><span class="content">Timothy Grymonpon</span></p>
            <p class="team"><span class="caption">Team:</span> <span class="content">Christophe, Dominique, Jan, Jelle, Kevin, Pieter, Plamen, Rebekka</span></p>
        </div></section><section class="slide" id="" style=""><header>
            <h3>Multinet-R process overview</h3>
        </header><img src="img/overview.jpg"></section><section class="slide" id="" style=""><header>
            <h3>Daf punk - Wrap up remaining work</h3>
        </header><ul>
            <li>Extend Pcontrol-library for loading xml templates</li>
            <li>Automatically generate gate in TIF2TTOM TB deployment</li>
            <li>DatasetDetector : auto-deploy &amp; generate configuration file</li>
         </ul></section><section class="slide" id="" style=""><header>
            <h3>Machine Readable spec</h3>
        </header><ul>
            <li>New DITA generation tool (common-pm-to-dita)</li>
            <li>Integration of DITA generator into modeltools</li>
        </ul>
<img src="img/mrs.png"></section><section class="slide" id="" style=""><header>
            <h3>[Machine Readable spec] What is DITA ?</h3>
        </header><ul>
            <li>The <strong>Darwin Information Typing Architecture</strong> (DITA) is an XML data model for authoring and publishing with the DITA Open Toolkit. The DITA Open Toolkit can produce:</li>
            <ul>
                <li>Docbook</li>
                <li>Eclipse Help</li>
                <li>JavaHelp</li>
                <li>Microsoft Compiled HTML Help</li>
                <li>ODT</li>
                <li>PDF, through XSL-FO</li>
                <li>Word RTF (with some limitations)</li>
                <li>troff</li>
                <li>XHTML and XHTML with a JavaScript frameset</li>
            </ul>       
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Machine Readable spec]  DITA generation tool</h3>
        </header><ul>
            <li>CLI Tool (common-pm-to-dita)</li>
            <li>Input : PMFF  (<a href="dita/multinet-r-1.xml">multinet-r.xml</a>)</li>
            
            <img src="img/dita/running_dita_gen_cli.png">
            
            <li>Output : DITA files generated(http://docs.oasis-open.org/dita/v1.2/os/DITA1.2-xsds/xsd1.2/). One file for each database table defined within PMFF</li>
            <img src="img/dita/list_of_generated_dita_files.png">

            <li>Example:
                <ul>
                    <li>Generated DITA file: <a href="dita/mnr_hierarchical_index.dita">mnr_hierarchical_index.dita</a>
</li>
                    <li>Generated HTML from DITA: <a href="http://help.tomtomgroup.com/specs/specification/mn-r_1-3-0/external/index.html#mnr_format_spec/mnr_table/mnr_hierarchical_index.html">mnr_format_spec/mnr_table/mnr_hierarchical_index.html</a>
</li>
                </ul>
            </li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Machine Readable spec] modeltools integration</h3>
        </header><ul>
            <li>The DITA generation has been integrated into modeltools (Ea2Pmf and Xmi2Pmf)</li>
            <ul>
                <li>Ea2Pmf and Xmi2Pmf tools now take as an optional parameter (<strong>--dita</strong>) the output directory for the generated DITA files.</li>
            </ul>

            <li>Example 1:
                <ul>
                    <li>Generated DITA file: <a href="dita/mnr_hierarchical_index.dita">mnr_hierarchical_index.dita</a>
</li>
                    <li>Generated HTML from DITA: <a href="http://help.tomtomgroup.com/specs/specification/mn-r_1-3-0/external/index.html#mnr_format_spec/mnr_table/mnr_hierarchical_index.html">mnr_format_spec/mnr_table/mnr_hierarchical_index.html</a>
</li>
                </ul>
            </li>
            <li>Example 2:
                <ul>
                    <li><a href="http://help.tomtomgroup.com/specs/specification/mn-r_1-2-0/internal/index.html#product_format_spec/routing/network.html">MNR 1.2.0 (pilot release 1)</a></li>
                    <li><a href="http://help.tomtomgroup.com/specs/specification/mn-r_1-3-0/internal/index.html#mnr_format_spec/routing/network.html">MNR 1.3.0 (pilot release 2)</a></li>
                </ul>
            </li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Documentation] Specifications - System Documentation</h3>
        </header><p>Specification improvements:</p>
<ul>
            <li>Physical model from enterprise architect is automatically integrated in MNR HTML documentation (using DITA).</li>
            <li>
<a href="http://help.tomtomgroup.com/specs/specification/mn-r_1-3-0/internal/index.html#mnr_format_spec/ttom2mnr_mapping/ttom2mnr.html">Mapping documentation</a> from TTOM to MNR is started and also integrated in MNR documentation (only in internal version)</li>
        </ul>
<p>We created <a href="http://vos.intra.local/display/CPEMPE/MNR+-+Instructions+%28in+process%29" target="_blank">documentation</a> on how to setup a (free!) Postgres/PostGIS environment to load MNR products:</p>
<ul>
            <li>Postgres</li>
            <li>QuantumGIS</li>
            <li>Loading scripts</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Content] Add traffic flow to route link and restrictions</h3>
        </header><ul>
            <li>Detailed traffic flow per vehicle type added to restrictions</li>
            <li>Simplified traffic flow added to network route link</li>
            <li>Note: time domains not yet implemented for any restriction</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Content] Extend hierarchical index: add postal districts, admin places, census areas</h3>
        </header><ul>
            <li>Hierarchical index</li>
            <ul>
                <li>Has been extended with additional index relevant areas:</li>
                <ul>
                    <li>postal districts</li>
                    <li>neighborhoods</li>
                    <li>admin places</li>
                </ul>
                <li class="not-done">Not done (because of CDP infrastructure problems):</li>
                <ul>
                    <li>integration of census blocks in hierarchical index</li>
                </ul>
            </ul>
            <li>Link from network to hierarchical index</li>
            <ul>
                <li>Has also been extended with link from network to:</li>
                <ul>
                    <li>neighborhood</li>
                    <li>admin places</li>
                </ul>
                <li class="not-done">Not done (because not available in TTOM):</li>
                <ul>
                    <li>link from network to postal districts</li>
                    <li>link from network to census block</li>
                </ul>
            </ul>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Content] Water areas, city centres</h3>
        </header><ul>
            <li>Water areas: layer fully populated</li>
            <li>City centres: only partly populated, because we're missing TTOM info:</li>
            <ul>
                <li>Service in order 8 area is completely missing</li>
                <li>Service along road element has missing attributes (side of line and relative position are not available and are populated with default values)</li>
                <li>Only one name is provided</li>
            </ul>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Infrastructure] Add normalization to ProductCreateJob</h3>
        </header><p>Example input:</p>
<blockquote style="font-size:16px">
        00005947-3200-5a00-0000-00003b9af21b|Biermannekenspad<br>
        00005947-3200-5a00-0000-00003b9af21d|Scheepsankerstraat<br>
        <font color="green">00005947-3200-5a00-0000-00003b9af21e|Broekkantstraat</font><br>
        <font color="green">00005947-3200-5a00-0000-00003b9af21e|Broekkantstraat</font><br>
        00005947-3200-5a00-0000-00003b9af220|Ezelstraatje<br>
                </blockquote>
<p>Before the sprint:</p>
<pre style="margin:5px;padding:5px;"><code>sort MNR_Netw_Name | uniq</code></pre>
<p> </p>
<p>Current state:</p>
<pre style="margin:5px;padding:5px;"><code>ProductCreateJobBuilder builder = new ProductCreateJobBuilder();<br>builder.addLayerProcessor(nwLayerProcessor, <font color="green">true</font>);</code></pre>
<p> </p>
<ul>
            <li>Possibility to normalize records is now an optional/configurable part of CDP infrastructure (available to all users of ProductCreateJob)</li>
            <li>Executed on Hadoop infrastructure</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Infrastructure] Move from CSV to Sequence file</h3>
        </header><p>Because:</p>
<ul>
            <li>CSV files don't support text fields with pipes (and we do have them)</li>
            <li>We want to have MNR data available within the Hadoop framework because we plan to build record updates by efficiently diffing products within the Hadoop ecosystem.</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>[Infrastructure] Adapt code generation: add AVRO (de)serialization support</h3>
        </header><p>Based on a physical model, java code is automatically generated to help people write code that dumps a product according to specifications. The automatically generated classes representing multinet-r layer records now are extended with the following functionalities:</p>
<ul>
            <li>A class representing a record exposes an Avro <strong>schema</strong>
</li>
            <li>
<strong>Automatic conversion from</strong> semantic record to Avro generic record</li>
            <li>
<strong>Automatic conversion to</strong> semantic record from Avro generic record</li>
        </ul>
<p>We are now able to safely and easily store and read records in a <strong>binary</strong> Avro compatible form. Avro from is able to store all data and does not have the piple delimiter problem as Csv form records do.</p></section><section class="slide" id="" style=""><header>
            <h3>[Infrastructure] Serialize to AVRO seq file</h3>
        </header><p>Adapting the MNR-pilot to not output csv files but seq files. We will then dump the seq files into csv in a next stage if needed.</p>
<ul>
            <li>Implementation done</li>
            <li>Present on a branch, merging when seq to csv dumper is done.</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3 class="not-done">[Infrastructure] Convert AVRO seq file to CSV</h3>
        </header><ul>
            <li>Required to deliver same MNR data format as previous pilot delivery</li>
            <li>Delivery format is likely to change in the future</li>
            <li>The work for this has not been started</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>Fix remarks from customers on first MNR sample</h3>
        </header><ul>
            <li>Tables for enumerations (not described in the spec) have been replaced by database domains (specialized data types with value checks)</li>
            <li>Physical model XML is now in line with XSD schema definition. Schema definition is now versioned</li>
            <li>Data type improvements (UUID, spatial datatypes) for physical model</li>
            <li>Postgres load scripts have been improved and now create ALL MNR tables (instead of only the tables we already populate)</li>
            <li>Moved model checks as early as possible in the process (to ensure MNR HTML documentation and physical model XML are aligned)</li>
            <li>Only one data package with a combined D64/UC3 zone (instead of 2 separate dataset deliveries)</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>Create second pilot release package</h3>
        </header><ul>
            <li>TTOM data of pilot datasets D64/UC3 are moved to a faster Oracle server</li>
            <li>Jenkins plans created to automatically build:</li>
            <ul>
                <li>Hakuna Matata datasets (MNR data + postgres load scripts)</li>
                <li>MNR Pilot datasets D64/UC3 (MNR data + postgres load scripts)</li>
            </ul>
            <li>Unit test coverage boosted from 40% to 95+% (see <a href="http://sonar.tomtomgroup.com:8080/sonar/plugins/resource/95831?page=org.sonar.plugins.timeline.GwtTimeline" target="_blank">Sonar graph</a>)</li>
            <li>Integration tests extended</li>
            <li>Control plan created + executed</li>
            <li>
<a href="file:///share/peg/workspace/multinet-r/2013-02-04/release-notes.html" target="_blank">Release notes</a> updated</li>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>Summary: improvements since previous sample</h3>
        </header><ul>
            <li>Combined delivery of D64 and UC3</li>
            <li>Physical model integrated in HTML spec using DITA</li>
            <li>Postgres load scripts have been improved and extended</li>
            <li>Additional data content:</li>
            <ul>
                <li>Traffic flow (summarizing value in route link + details in restrictions)</li>
                <li>Hierachical index extended (with postal districts, admin places, neighborhoods)</li>
                <li>City centers with basic attributes</li>
                <li>Water areas</li>
            </ul>
        </ul></section><section class="slide" id="" style=""><header>
            <h3>Multinet-R demo</h3>
        </header><div>
             <div id="mnr-demo-map"></div>
        </div>
<p> </p>
<p>
            <a href="javascript:%24('#mnr-demo-map').fullScreen();" style="font-size: 14px">Go fullscreen</a>
        </p></section><section class="slide" style="background-image: url('../deck/slides/confused-chan.jpg')"><h1 class="center">Any Questions?</h1></section><section class="slide" style="background-image: url('../deck/slides/thank-you.jpg')"><h1 class="center">Thank you!</h1></section><a href="#" class="deck-prev-link" title="Previous">←</a><a href="#" class="deck-next-link" title="Next">→</a><p class="deck-status"><span class="deck-status-current"></span>
	/
	<span class="deck-status-total"></span></p>
<form action="." method="get" class="goto-form">
<label for="goto-slide">Go to slide:</label><input type="text" name="slidenum" id="goto-slide" list="goto-datalist"><datalist id="goto-datalist"></datalist><input type="submit" value="Go">
</form>
<a href="." title="Permalink to this slide" class="deck-permalink">#</a><script src="../deck/lib/jquery-1.7.2.min.js"></script><script src="../deck/lib/jquery-fullscreen.js"></script><script src="../deck/core/deck.core.js"></script><script src="../deck/core/deck.core.js"></script><script src="../deck/extensions/hash/deck.hash.js"></script><script src="../deck/extensions/menu/deck.menu.js"></script><script src="../deck/extensions/goto/deck.goto.js"></script><script src="../deck/extensions/status/deck.status.js"></script><script src="../deck/extensions/navigation/deck.navigation.js"></script><script src="../deck/extensions/scale/deck.scale.js"></script><script>
	$(function() {
		$.deck('.slide');
	});
</script><script type="text/javascript">
            var $d = $(document);
            $d.bind('deck.init',
                        function() {
                            var map = new OpenLayers.Map('mnr-demo-map', {
                                projection: new OpenLayers.Projection("EPSG:900913"),
                                displayProjection: new OpenLayers.Projection("EPSG:4326"),
                                units: 'm'
                            });

                            var lbs = new OpenLayers.Layer.XYZ("TomTom Sydney LBS",
                                        ["http://a.routes.tomtom.com/lbs/map/1/basic/${z}/${x}/${y}/1e2099c7-eea9-476b-aac9-b20dc7100af1;v=3;l=nl;m=png"],
                                        {
                                            layers:'basic'
                                        },
                                        {
                                            numZoomLevels: 17
                                        }
                            );

                            var world_wa = new OpenLayers.Layer.WMS(
                                "MNR Water Area", "http://bekka-desktop:8080/geoserver/mnr-pilot/wms",
                                {
                                    layers: 'mnr-pilot:MNR_Carto_Water_A',
                                    srs: 'EPSG:4326',
                                    styles: '',
                                    tiled: true,
                                    transparent: true,
                                    format: "image/png",
                                    tilesOrigin : map.maxExtent.left + ',' + map.maxExtent.bottom,
                                    displayInLayerSwitcher: true
                                },
                                {
                                    buffer: 0,
                                    displayOutsideMaxExtent: false,
                                    isBaseLayer: false,
                                    yx : {'EPSG:4326' : true}
                                }
                            );

                            var world_cc = new OpenLayers.Layer.WMS(
                                "MNR City Center", "http://bekka-desktop:8080/geoserver/mnr-pilot/wms",
                                {
                                    layers: 'mnr-pilot:MNR_CityCenter',
                                    srs: 'EPSG:4326',
                                    styles: '',
                                    tiled: true,
                                    transparent: true,
                                    format: "image/png",
                                    tilesOrigin : map.maxExtent.left + ',' + map.maxExtent.bottom,
                                    displayInLayerSwitcher: true
                                },
                                {
                                    buffer: 0,
                                    displayOutsideMaxExtent: false,
                                    isBaseLayer: false,
                                    yx : {'EPSG:4326' : true}
                                }
                            );

                            var world_hi = new OpenLayers.Layer.WMS(
                                "MNR Hierarchy", "http://bekka-desktop:8080/geoserver/mnr-pilot/wms",
                                {
                                    layers: 'mnr-pilot:MNR_Hierarchical_Index',
                                    srs: 'EPSG:4326',
                                    styles: '',
                                    tiled: true,
                                    transparent: true,
                                    format: "image/png",
                                    tilesOrigin : map.maxExtent.left + ',' + map.maxExtent.bottom,
                                    displayInLayerSwitcher: true
                                },
                                {
                                    buffer: 0,
                                    displayOutsideMaxExtent: false,
                                    isBaseLayer: false,
                                    yx : {'EPSG:4326' : true}
                                }
                            );

                            map.addLayer(lbs);
                            map.addLayer(world_hi);
                            map.addLayer(world_wa);
                            map.addLayer(world_cc);
     

                            /* Note: beware of same-origin-policy. */
                            info = new OpenLayers.Control.WMSGetFeatureInfo({
                                url: 'http://bekka-desktop:8080/geoserver/mnr-pilot/wms', 
                                title: 'Identify features by clicking',
                                queryVisible: true,
                                eventListeners: {
                                    getfeatureinfo: function(event) {
                                        map.addPopup(new OpenLayers.Popup.FramedCloud(
                                            "chicken", 
                                            map.getLonLatFromPixel(event.xy),
                                            null,
                                            event.text,
                                            null,
                                            true
                                        ));
                                    }
                                }
                            });
                            
                            var mousePositionCtrl = new OpenLayers.Control.MousePosition();

                            map.addControl(new OpenLayers.Control.LayerSwitcher());
                            map.addControl(info);
                            map.addControl(mousePositionCtrl);
                            info.activate();

                            var lonlat = new OpenLayers.LonLat(-122.25320, 37.66681);
                            lonlat.transform( new OpenLayers.Projection("EPSG:4326"), map.getProjectionObject() );
                            map.setCenter(lonlat, 10);
            });
        </script>
</body>
</html>
