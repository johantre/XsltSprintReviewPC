<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="../deck1/slides.xsl"?>
<slides>
    <dependencies>
        <script src="http://openlayers.org/api/OpenLayers.js"></script>
        <link rel="stylesheet" href="extra/mnr-demo.css"/>
    </dependencies>

    <title>Sprint Review Pandora</title>

	<sprint>
        <started>2nd of April 2013</started>
        <ended>30th of April 2013</ended>
	    <productowner>Timothy Grymonpon</productowner>
        <scrummaster>Timothy Grymonpon</scrummaster>
	    <teammembers>Charlotte, Christophe, Dominique, Jan, Jelle, Kevin, Pieter, Plamen, Rebekka</teammembers>
        <goal>
            <p>
                "Deliver MN-R prototype 5 to our customers"
                <br /><br />
                "Make continental and seamless TTOM (for defined feature scope)"
            </p>
            <p><cite style="float: right">Our product owner</cite></p>
        </goal>
	</sprint>


    <story epic="MNR MAINT" title="Package, document, release prototype 4 and 5 + fix feedback (2)" status="done" sp="2">
        <slide>
            <p>Previous prototype 2013.04 was succesfully released, on the 5th of April:</p>
            <ul>
                <li>WORLD containing UC3 and D64.</li>
                <li>Delta containing AND</li>
            </ul>
            <p>New in release 5, released probably May 2nd: <strong>18 new or updated content layers</strong></p>
            <p>Received feedback from Mapscape:</p>
            <ul>
                    <li>They have created a first VW NDS product based on MNR.</li>
                    <li>They are using the diffs we delivered.</li>
                    <li>They would like some more documentation (they refer to MN right now).</li>
                    <li>They ask us to split up our data (WORLD -> UC3 + D64).</li>
                    <li>They would like country/continent meta information.</li>
                    <li>They experienced clipping issues on Eindhoven (release 3).</li>
            </ul>
            <p>Partitioning? Next sprint(s)!</p>
            <p>Current status (layers, discussions, issues) can always be found here:</p>
            <a href="http://vos.intra.local/display/CPEMPE/Multinet-R+Status" target="_blank">http://vos.intra.local/display/CPEMPE/Multinet-R+Status</a>
        </slide>
    </story>

    <story epic="MNR MACHSPEC" title="Modeltools enhancements and bug fixes" status="done" sp="2">
        <slide>
            <ul>
                <li>Xmi2Pmf converter:</li>
                <ul>                
                    <li>Fixed width and precision for decimal types.</li>
                    <li>Fixed geometry type.</li>
                </ul>
                <li>DITA file generation:</li>
                <ul>
                    <li>Fixed entity encoded characters.</li>
                    <li>Fixed type description for ranges.</li>
                    <li>Fixed the width for varchar columns.</li>
                    <li>Fixed the field type for enum columns.</li>
                </ul>
            </ul>
        </slide>
    </story>

    <story epic="MNR INFRA" title="Clean up and improve development process ease of use" status="done" sp="3">
        <slide>
            <p>Making the running of our stack more fluid, and configurable.</p>
            <ul>
                <li>We have one set of scripts responsible for <strong>deployment</strong> and <strong>running</strong>.</li>
                <li>Automated tagging for <strong>python</strong> projects.</li>
                <li>Gate and other <strong>configuration</strong> is no longer hard-coded</li>
                <li>Out-of-the-box we now have different <strong>profiles</strong> to run with (periodic, delta, nightly, ...)</li>
                <li>We now also support <strong>running manually</strong> much better, either on the local machine or on a server</li>
                <li>We <strong>documented</strong> the <a href="http://vos/display/CPEMPE/MNR+Prototype+directory+structure">directory structure of our prototype releases</a>.</li>
            </ul>
            <p>These improvements allow us to manage our automated runs on jenkins a bit better. It also allows for testing and running locally as a developer. It should in the future also aid for deploying and running in production.</p>
        </slide>
    </story>

    <story epic="MNR LAYER" title="Upgrade to TTOM 3.10 and implement new naming model for network route link" status="done" sp="3">
        <slide>
            <div style="float: left; clear: none">
                <ul>
                    <li>Using TTOM_Name objects (NameSet, TransliterationSet, ...)</li>
                    <li><i>PrimaryName</i> flag is used by the MNR converter so we have the correct name in the product.</li>
                    <li>Updates in mnr-converter (Route link, Netw Name, Netw Name Rel, ...)</li>
                    <li>Upgrade to new TIF2TTOM</li>
                    <li>Recreate TTOM GDF data</li>
                    <li>Had to go "back in time" to implement some fixes for seaming (see later).</li>
                    <p />
                    <li><u>Next up:</u> TTOM 3.12
                        <ul>
                            <li>Area names</li>
                            <li>Ferry Element, Address Area Boundary Element</li>
                            <li>Railway Element</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div style="float: right; clear: none">
                <img src="img/names.png" width="400px" />
            </div>
        </slide>
    </story>

    <story epic="MNR LAYER" title="Rework network restrictions and maneuver validity" status="done" sp="3">
        <slide>
            <ul>
                <li>Compared to previous modelchange there was still room for improvement:</li>
                <li>Link to network:
                    <ul>
                        <li>Moved from MNR_Restriction to MNR_Netw_Restrict_Rel</li>
                        <li>Moved from MNR_Maneuver_Validity to MNR_Maneuver_Val_Rel</li>
                    </ul>
                </li>
                <li>
                    <u>Advantage:</u> normalization benefits: 25% size reduction in our pilot delivery (for WORLD).
                </li>
                <li>
                    MNR_Restriction (208MB), now split into three tables:<br />
                    MNR_Netw_Restriction (161MB), MNR_Restriction (1MB), MNR_Maneuver_Val_Rel (2MB).
                </li>
                <li><u>Also implemented:</u> TimeDomains</li>
                <li>Still one of the largest tables, see <a href="statistics/WORLD/index.html" target="_blank"> our statistics</a></li>
            </ul>
        </slide>
    </story>

    <story epic="MNR LAYER" title="Implement Level 2 features, Admin political areas, Network Lane info (3) " status="done" sp="6">
        <slide>
            We have added:
                <ul>
                    <li>Intersections (MNR_Inters, MNR_Inters_Idx)</li>
                    <li>Roads (MNR_Level2R, MNR_Level2R_Idx)</li>
                    <li>Freeway Intersections (MNR_Freeway_Inters, MNR_Freeway_Inters_Idx)</li>
                    <p />
                    <li>Political Administrative Area (MNR_AdminPol_Area, MNR_AdminPol_Off_Lang)</li>
                    <p />
                    <li>Lane Info (MNR_Lane_Connect, MNR_Lane_Information, MNR_Lane_Restriction_Time_Dom, MNR_Netw_Lane_Info_Rel)</li>
                </ul>
                <p><u>Risk:</u> The more layers we have, the more we need to update when TTOM changes.</p>
                <p>Demo later</p>
            <!--
            <table>
                <tr>
                    <td>
                        <img src="img/inters.jpeg" />
                    </td>
                    <td>
                        <img src="img/level2r.jpeg" />
                    </td>
                    <td>
                        <img src="img/freeway_inters.jpeg" />
                    </td>
                </tr>
            </table>
            -->
        </slide>
    </story>

    <story epic="MNR LAYER" title="VW traffic signs (finish spec work + create sample data)" status="done" sp="2">
        <slide>
            <ul>
                <li>Created test cases in Hakuna Matata</li>
                <li>Tamapper V21.59.001 received on April 22nd, converted Hakuna Matata</li>
                <li>TTOM Model update for traffic sign</li>
                <li>First Draft version of SDS, MNR Specifications available</li>
                <li>Next up:
                    <ul>
                        <li>Mapping for TIF2TTOM</li>
                        <li>Mapping for MultiNet-R</li>
                        <li>MN Allcodes: new traffic sign available</li>
                        <li>Mapping for TIF2MN?</li>
                    </ul>
                </li>
            </ul>
        </slide>
    </story>

    <story epic="MNR CONTINENT" title="Implement seaming in TIF2TTOM (geometry, network element, junction)" status="done" sp="5">
        <slide>
            <p>Challenge: solve all border artifacts</p>
            <ul>
                <li>no duplicated point/line geometry on dataset border</li>
                <li>no features are split because of dataset borders: we need one DEU/USA/... polygon</li>
                <li><em>= deduplication / merge challenge</em></li>
            </ul>
            <p>Challenge: seamless TTOM vs dataset based GDF schemas produced by TIF2TTOM</p>
            <ul>
                <li>virtual PDS: we don't have one storage container containing all products</li>
                <li>physical storage remains one GDF schema per TIF dataset (-> not physically seamed!)</li>
                <li>ZoneInputFormat API serving TTOM features gives seamless impression</li>
                <li>making TTOM seamless will be achieved by making a mix of updates</li>
                <ul>
                    <li>updates will be done in GDF to make it <em>easier</em> to build seamless TTOM</li>
                    <li>updates will be required in ZoneInputFormat to actually merge the features</li>
                </ul>
            </ul>
        </slide>

        <slide>
            <img style="float:center" src="img/process_overview.png"/>
        </slide>

        <slide>
            <p>Making TTOM seamless will happen in different phases:</p>
            <ul>
                <li>only a limited feature set is in scope</li>
                <li><em style="color: blue">features</em>:</li>
                    <ul>
                        <li>align geometry (lines) or merge geometry (polygons, complex features)</li>
                        <li>give multiple features the same id</li>
                    </ul>
                <li><em style="color: blue">associations</em>: when combining features, associations of the original features will be combined</li>
                <li><em style="color: blue">attributes</em>: when combining features, attributes should be merged intelligently</li>
            </ul>
            <p><em>Advantage of phased approach: if dataset crossing features have aligned/merged geometry and same id, attribute comparison is easy to implement</em></p>
        </slide>

<!-- don't throw away: use this to give bigbang more details on the technical process
        <slide>
            <p>Process:</p>
            <ul>
                <li>extension of dataset link concept from TIF2MN</li>
                <li>dataset link libraries are extended to support 'conversion records' for nodes and edges</li>
                <li>additional tools added to process chain to create dataset link info for geometry and admin areas</li>
                <li>dataset link step has updated behaviour:</li>
                <ul>
                    <li>we don't create conversion records any more</li>
                    <li>instead, we update GDF feature id's to a 'synchronized' id</li>
                </ul>
                <li>quality check added add the end of TIF2TTOM chain (with detailed attribute diff of all features with synchronized id's)</li>
                <li>GDF updates</li>
                <li>ZoneInputFormat code has improved merging</li>
            </ul>
            <p>Important to know: this process</p>
            <ul>
                <li>can merge features IF they were already present in neighbouring dataset (road on border present in 2 datasets)</li>
                <li>does not create additional features in one dataset because they are required in another (admin boundary junction only present in one dataset)</li>
            </ul>
        </slide>
-->
        <slide>
            <p>Alignment of edge direction on dataset border</p>
            <ul>
                <li>edges on dataset borders have been aligned (south-north direction)</li>
                <li>dataset link libraries are extended and now support 'conversion records' for nodes and edges</li>
<!--                <li>implemented as post process on GDF (as late as possible)</li> -->
            </ul>
            <div style="float: left; color: red">Before aligning</div>
            <div style="float: right; color: black">After aligning</div>
            <img style="float:center" src="img/test.png"/>
        </slide>

        <slide>
            <p>Aligning of network element direction on dataset border</p>
            <ul>
                <li>ALL line features (partly) on the dataset border are aligned (south-north)</li>
                <li>Implemented in standard converter (cannot be disabled)</li>
            </ul>
            <p>Synchronization of id's</p>
            <ul>
                <li>same principle as for Junctions in current MN Shapefile/Oracle products: instead of creating conversion records, feature id's are updated (from the original id to a synchronized id)</li>
                <li><em>important consequence</em>: dataset is not encoded any more in UUID of feature!</li>
                <li>implemented for <em style="color: blue">ALL</em> features where we create conversion records for in TIF2MN</li>
                <li>additionally implemented for node, edge, admin area</li>
                <li>ZoneInputFormat merges features with the same id and their associations (not yet attributes)</li>
            </ul>
        </slide>
    </story>

    <story epic="MNR CONTINENT"  title="Implement seaming in TIF2TTOM (administrative areas)" status="done" sp="1">
        <slide>
            <ul>
                <li>DNA based merge approach</li>
                <li>DNA used = hierarchy of official codes (no geometry used)</li>
                    <ul>
                        <li><em style="color: blue">BEL - 02000 - 40000 - 44000 - 44021</em> is the DNA of the admin order 8 Gent in Belgium</li>
                        <li><em style="color: blue">USA - CA</em> is DNA of the state of California in the USA</li>
                        <li><em style="color: blue">USA - CA - CA07</em> is DNA of San Fransisco county</li>
                        <li><em style="color: blue">FRA</em> is DNA of France (Clipperton Island ?)</li>
                    </ul>
                <li>all features with same DNA are merged into one feature (our neighbouring country and oversea areas which have FRA as order 0 code will all be part of the same feature)</li>
                <li>even small admin areas (order 8/9) can be dataset crossing (Alaska: +180°/-180° border)</li>
                <li>implemented for all admin area orders (0-9)</li>
            </ul>
            <p><em>WARNING: DNA backend used is dataset link Oracle database (not yet a structural DNA solution scalable up to billions of DNA)</em></p>
        </slide>

        <slide>
            <em>Demo</em>
            <ul>
                <li>Seamless MNR of Ghent (Hakuna Matata version)</li>
                <li>Seamless MNR of Germany (preview)</li>
            </ul>
        </slide>
    </story>

<!--    <story epic="MNR RECUPD" title="Demo" status="done">
        <slide>
             <div>
                 <div id="mnr-demo-map"></div>
            </div>
            <p>...</p>
            <div id="mnr-demo-map-tools">
                <a href="javascript:$('#mnr-demo-map').fullScreen();" style="font-size: 14px">Go fullscreen</a>
                <div id="mnr-demo-map-zones" style="float: right">
                </div>
            </div>
        </slide>
    </story>
-->

    <initscript>
    </initscript>

</slides>
